## 新闻采集分析子系统测试报告

#### 一、测试目的

1. 检查各个爬虫程序是否能够完成新闻爬取的任务

2. 通过对测试结果的分析，评估子系统质量是否达标

3. 分析程序中是否存在bug，对不好的代码进行优化

#### 二、测试环境

1. 集成开发环境 ：PyCharm，版本2020.2.1

2. 编程语言 Python，版本为Python3.8

#### 三、测试范围

新闻采集子系统中所有的爬虫程序

##### 1、测试过程

​	时间：2021年5月16日

 ##### 2. 测试过程表格如下：

| 测试程序         | 测试网址                                      | 测试方法                             | 测试结果                                                     | bug原因推测                                       | 测试建议                                                     | 测试评价     |
| ---------------- | --------------------------------------------- | ------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------- | ------------------------------------------------------------ | ------------ |
| 故宫博物馆爬虫   | https://www.dpm.org.cn/activity/educations/p/ | 指定网址，定向爬取新闻，分析新闻数据 | 能爬取95新闻（共99条），剩下**四条新闻由于编码解析出错无法写入Excel文件**。 | 由于新闻内内容中含有特殊字符无法解析为“utf-8”格式 | 不用正则表达式提取新闻内容，用Xpath中的“**提取子节点的所有内容”**的方法 | 基本符号要求 |
| 恭王府博物馆爬虫 | http://www.pgm.org.cn/pgm/wfdt/list           | 指定网址，定向爬取新闻，分析新闻数据 | 一共爬取999条新闻，所有新闻所在网页都爬取成功。其中**有14条新闻在写入文件的时候，由于文本解析出错而无法写入**。 | 由于新闻内内容中含有特殊字符无法解析为“utf-8”格式 | 不用正则表达式提取新闻内容，用Xpath中的“**提取子节点的所有内容”**的方法。解决办法：1.人工提取解析出错的新闻，速度较慢；2.改进代码格式，对出错的新闻采用**Bs4中网页解析和Xpath方法中节点数据提取**等方法，获得新闻数据 | 基本符号要求 |
| 南京博物馆爬虫   | http://www.njmuseum.com/zh/newsDetails        | 指定网址，定向爬取新闻，分析新闻数据 | 一共爬取了900条新闻，新闻都能爬取并被解析。                  | 没有出现bug，能爬取并解析所有的新闻数据           |                                                              | 完全符号要求 |
| 成都博物馆爬虫   | https://www.cdmuseum.com/xinwen/              | 指定网址，定向爬取新闻，分析新闻数据 | 指定网址，定向爬取新闻，分析新闻数据                         | 没有出现bug，能爬器并解析数据                     |                                                              | 完全符号要求 |
| 百度资讯定时爬取 | https://www.baidu.com/s?ie=UTF-8&wd=百度资讯  | 定时爬取新闻                         | 爬取当前时间网页中所有的新闻数据                             | 没有出现bug，能爬取并解析数据                     |                                                              | 完全符号要求 |

#### 四、测试结果分析

经过对测试结果和程序本身代码逻辑的分析，爬虫程序都能100%爬取到新闻网页，但对**新闻数据的解析过程**可能会出现bug

#### 五、爬虫程序改进建议

​	1.对出现解析错误的爬虫程序，首先采用Xpath再次解析，即把出错的新闻单独进行解析

​	2.若无法解析出新闻内容，则同时采用Xpath和Bs4中的网页解析器进行新闻数据解析

#### 六、再次测试改进的程序，得到最终测试结果

​	所有的爬虫程序经过改进和修正后，爬取新闻和解析新闻的成功率达到**100%**，完全符号新闻数据的爬取要求

### 软件测试总结

1.在新闻爬取过程中出现bug是难免的，要通过多种途径寻求解决的办法

2.遇到bug的时候团队成员要积极讨论，交换意见，才能更快地解决问题

3.在解决了各种问题以后，新闻采集子系统的质量达到标准，可以交付使用

